<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <style>
        /* 极小化样式，仅保留必要功能 */
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        body { 
            font-family: sans-serif; 
            background: transparent; 
            color: transparent; 
            min-height: 100vh;
            overflow: hidden;
        }
        /* 隐藏所有元素的极简样式 */
        .hidden-interface {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- 完全空白的HTML结构，但保留功能 -->
    
    <!-- 隐藏的功能元素 -->
    <div id="hiddenFunctionality" style="display: none;">
        <!-- 这些元素用于功能但不可见 -->
        <input type="text" id="keywords" value="">
        <input type="text" id="baseUrl" value="">
        <div id="generatedUrl"></div>
        <div id="paramList"></div>
    </div>

    <script>
        // 页面加载时检查URL参数（隐藏参数机制的核心功能）
        document.addEventListener('DOMContentLoaded', function() {
            // 获取当前URL中的参数
            const urlParams = new URLSearchParams(window.location.search);
            const encodedKeywords = urlParams.get('k');
            
            if (encodedKeywords) {
                // 解码关键词
                const keywords = decodeURIComponent(encodedKeywords).split(',').filter(k => k.trim());
                
                // 记录到控制台（仅用于调试）
                console.log('隐藏参数已检测到：', keywords);
                
                // 清除URL参数（隐藏参数机制的核心）
                const cleanUrl = window.location.origin + window.location.pathname;
                window.history.replaceState({}, document.title, cleanUrl);
                
                // 设置页面标题为关键词（可选）
                if (keywords.length > 0) {
                    document.title = keywords.join(' ');
                }
                
                // 将关键词存储到隐藏元素中
                document.getElementById('keywords').value = keywords.join(', ');
                
                // 设置生成URL（用于后续功能）
                const baseUrl = 'https://example.com/service';
                const separator = baseUrl.includes('?') ? '&' : '?';
                const generatedUrl = `${baseUrl}${separator}k=${encodedKeywords}`;
                document.getElementById('generatedUrl').textContent = generatedUrl;
                document.getElementById('baseUrl').value = baseUrl;
                
                // 更新参数列表
                const paramList = document.getElementById('paramList');
                paramList.innerHTML = '';
                keywords.forEach(keyword => {
                    const li = document.createElement('div');
                    li.textContent = keyword.trim();
                    paramList.appendChild(li);
                });
            } else {
                console.log('当前URL中没有检测到隐藏参数。');
            }
        });
        
        // 自动生成URL的函数（可以通过其他方式调用）
        function generateHiddenUrl(keywords, baseUrl) {
            const keywordArray = keywords.split(/[,，\s]+/)
                .map(keyword => keyword.trim())
                .filter(keyword => keyword.length > 0);
            
            if (keywordArray.length === 0) return '';
            
            const encodedKeywords = encodeURIComponent(keywordArray.join(','));
            const separator = baseUrl.includes('?') ? '&' : '?';
            return `${baseUrl}${separator}k=${encodedKeywords}`;
        }
        
        // 简化版复制函数
        function copyToClipboard(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
        }
        
        // 导出功能到全局作用域（如果需要外部调用）
        window.HiddenUrlGenerator = {
            generate: generateHiddenUrl,
            copy: copyToClipboard,
            getCurrentKeywords: function() {
                return document.getElementById('keywords').value;
            }
        };
        
        console.log('隐藏参数生成器已加载（空白页面模式）');
    </script>
</body>
</html>